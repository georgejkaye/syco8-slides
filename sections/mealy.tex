\section{Mealy machines}

\begin{frame}
    \frametitle{Mealy machine}

    Mealy machines are a kind of \alert{finite state machine}.

    \pause

    Sets of \alert{states} $S$, \pause \alert{inputs} $M$, \pause \alert{outputs} $N$

    \pause

    Given input $m \in M$ and state $s_1 \in S$ we have:
    
    \pause

    \begin{itemize}
        \item \alert{next state} $T(s_1)(m) = s_2 \in S$
        \pause
        \item \alert{output} $O(s_1)(m) = n \in N$.
    \end{itemize}

    \pause

    A Mealy machine also has a \alert{start state}.

    \pause

    \begin{center}
        \includestandalone{tikz/streams/exmealy}
    \end{center}

\end{frame}

\begin{frame}
    \frametitle{Mealy machines: bisimilarity}

    Mealy machines have a notion of \alert{bisimilarity}.

    \pause

    If two machines are \alert{observationally equivalent}, then they are bisimilar.

\end{frame}

\begin{frame}
    \frametitle{Props of mealy machines}

    By setting $M$ and $N$ to powers of $\textbf{V}$, we can define a prop of Mealy machines.

    \pause

    A morphism $m \to n$ is a Mealy machine with inputs $\textbf{V}^m$ and outputs $\textbf{V}^n$.
    
    \pause

    We can define composition, tensor, trace...

    \pause

    We interpret circuits as Mealy machines using a functor $\tomm$.

\end{frame}

\begin{frame}
    \frametitle{Interpreting $\scirc[\Sigma]$}    

    Source of \alert{state} in our circuits: \alert{values}...

    \pause

    \begin{center}
        \tikzfig{circuits/components/v}
        \qquad
        \pause
        $\xrightarrow{\tomm}$
        \qquad
        \raisebox{-1.25em}{\includestandalone{tikz/streams/valmealy}}
    \end{center}
\end{frame}

\begin{frame}
    \frametitle{Interpreting $\scirc[\Sigma]$}    
    ...and \alert{delay}.

    \pause
    \begin{center}
        \tikzfig{circuits/components/delay}
        \qquad
        \pause
        $\xrightarrow{\tomm}$
        \qquad
        \raisebox{-8em}{\includestandalone[scale=0.9]{tikz/streams/delaymealy}}
    \end{center}
\end{frame}


\begin{frame}
    \frametitle{Interpreting $\scirc[\Sigma]$}

    Gates don't have any `internal state'.

    \pause

    \begin{center}
        \tikzfig{circuits/components/gate}
        \qquad
        \pause
        $\xrightarrow{\tomm}$
        \qquad
        \raisebox{-1em}{\includestandalone{tikz/streams/gatemealy}}
    \end{center}

    \pause

    To interpret circuit morphisms, combine with composition, tensor, trace...

\end{frame}


\begin{frame}
    \frametitle{Interpreting $\scirc[\Sigma]$}

    Do all the axioms of $\scirc[\Sigma]$ hold in this prop? \pause \alert{Yes.}

    \pause

    \begin{theorem}
        For any $F,G \in \scirc[\Sigma]$, if $F = G$ then $\tomm[F]$ and $\tomm[G]$ are bisimilar.
    \end{theorem}

    \pause

    Can we return to a circuit from an arbitrary Mealy machine? 

    \pause

    Should be possible, rudimentary task in circuit design.
 
    \pause

    But first, how do we get to \alert{streams}?

\end{frame}